---
date: 2021-03-10T19:44
tags: 
  - stub
---

# Readers Writers: Simple Version

```
roomEmpty = S(1)
mutex = S(1)
nReader = 0
```

`writer`
```c
while (True) {
  wait(roomEmpty);
  // modify data
  signal(roomEmpty);
}
```

`reader`
```c
while (True) {
  wait(mutex);
  nReader++;
  if (nReader == 1) {
    wait(roomEmpty);
  }
  signal(mutex);
  
  // Reads data
  wait(mutex);
  nReader--;
  if (nReader == 0) {
    signal(roomEmpty);
  }
  signal(mutex);
}
```
