<!DOCTYPE html><html><head><meta content="text/html; charset=utf-8" http-equiv="Content-Type" /><meta content="width=device-width, initial-scale=1" name="viewport" /><!--replace-start-0--><!--replace-start-5--><!--replace-start-8--><title>What happens when you access google.com in your browser? - My Zettelkasten</title><!--replace-end-8--><!--replace-end-5--><!--replace-end-0--><link href="https://cdn.jsdelivr.net/npm/fomantic-ui@2.8.7/dist/semantic.min.css" rel="stylesheet" /><link href="https://fonts.googleapis.com/css?family=Merriweather|Libre+Franklin|Roboto+Mono&amp;display=swap" rel="stylesheet" /><!--replace-start-1--><!--replace-start-4--><!--replace-start-7--><link href="https://raw.githubusercontent.com/srid/neuron/master/assets/neuron.svg" rel="icon" /><meta content="Reference: https://github.com/alex/what-happens-when" name="description" /><link href="https://kwannoel.xyz/b753eb1d.html" rel="canonical" /><meta content="What happens when you access google.com in your browser?" property="og:title" /><meta content="My Zettelkasten" property="og:site_name" /><meta content="article" property="og:type" /><meta content="b753eb1d" property="neuron:zettel-id" /><meta content="b753eb1d" property="neuron:zettel-slug" /><meta content="networks" property="neuron:zettel-tag" /><script type="application/ld+json">[]</script><style type="text/css">body{background-color:#eeeeee !important;font-family:"Libre Franklin", serif !important}body .ui.container{font-family:"Libre Franklin", serif !important}body h1, h2, h3, h4, h5, h6, .ui.header, .headerFont{font-family:"Merriweather", sans-serif !important}body code, pre, tt, .monoFont{font-family:"Roboto Mono","SFMono-Regular","Menlo","Monaco","Consolas","Liberation Mono","Courier New", monospace !important}body div.z-index p.info{color:#808080}body div.z-index ul{list-style-type:square;padding-left:1.5em}body div.z-index .uplinks{margin-left:0.29999em}body .zettel-content h1#title-h1{background-color:rgba(165,103,63,0.1)}body nav.bottomPane{background-color:rgba(165,103,63,2.0e-2)}body div#footnotes{border-top-color:#a5673f}body p{line-height:150%}body img{max-width:100%}body .deemphasized{font-size:0.94999em}body .deemphasized:hover{opacity:1}body .deemphasized:not(:hover){opacity:0.69999}body .deemphasized:not(:hover) a{color:#808080 !important}body div.container.universe{padding-top:1em}body div.zettel-view ul{padding-left:1.5em;list-style-type:square}body div.zettel-view .pandoc .highlight{background-color:#ffff00}body div.zettel-view .pandoc .ui.disabled.fitted.checkbox{margin-right:0.29999em;vertical-align:middle}body div.zettel-view .zettel-content .metadata{margin-top:1em}body div.zettel-view .zettel-content .metadata div.date{text-align:center;color:#808080}body div.zettel-view .zettel-content h1{padding-top:0.2em;padding-bottom:0.2em;text-align:center}body div.zettel-view .zettel-content h2{border-bottom:solid 1px #4682b4;margin-bottom:0.5em}body div.zettel-view .zettel-content h3{margin:0px 0px 0.4em 0px}body div.zettel-view .zettel-content h4{opacity:0.8}body div.zettel-view .zettel-content div#footnotes{margin-top:4em;border-top-style:groove;border-top-width:2px;font-size:0.9em}body div.zettel-view .zettel-content div#footnotes ol > li > p:only-of-type{display:inline;margin-right:0.5em}body div.zettel-view .zettel-content aside.footnote-inline{width:30%;padding-left:15px;margin-left:15px;float:right;background-color:#d3d3d3}body div.zettel-view .zettel-content .overflows{overflow:auto}body div.zettel-view .zettel-content code{margin:auto auto auto auto;font-size:100%}body div.zettel-view .zettel-content p code, li code, ol code{padding:0.2em 0.2em 0.2em 0.2em;background-color:#f5f2f0}body div.zettel-view .zettel-content pre{overflow:auto}body div.zettel-view .zettel-content dl dt{font-weight:bold}body div.zettel-view .zettel-content blockquote{background-color:#f9f9f9;border-left:solid 10px #cccccc;margin:1.5em 0px 1.5em 0px;padding:0.5em 10px 0.5em 10px}body div.zettel-view .zettel-content.raw{background-color:#dddddd}body .ui.label.zettel-tag{color:#000000}body .ui.label.zettel-tag a{color:#000000}body nav.bottomPane ul.backlinks > li{padding-bottom:0.4em;list-style-type:disc}body nav.bottomPane ul.context-list > li{list-style-type:lower-roman}body .footer-version img{-webkit-filter:grayscale(100%);-moz-filter:grayscale(100%);-ms-filter:grayscale(100%);-o-filter:grayscale(100%);filter:grayscale(100%)}body .footer-version img:hover{-webkit-filter:grayscale(0%);-moz-filter:grayscale(0%);-ms-filter:grayscale(0%);-o-filter:grayscale(0%);filter:grayscale(0%)}body .footer-version, .footer-version a, .footer-version a:visited{color:#808080}body .footer-version a{font-weight:bold}body .footer-version{margin-top:1em !important;font-size:0.69999em}@media only screen and (max-width: 768px){body div#zettel-container{margin-left:0.4em !important;margin-right:0.4em !important}}body span.zettel-link-container span.zettel-link a{color:#a5673f;font-weight:bold;text-decoration:none}body span.zettel-link-container span.zettel-link a:hover{background-color:rgba(165,103,63,0.1)}body span.zettel-link-container span.extra{color:auto}body span.zettel-link-container.errors{border:solid 1px #ff0000}body span.zettel-link-container.errors span.zettel-link a:hover{text-decoration:none !important;cursor:not-allowed}body [data-tooltip]:after{font-size:0.69999em}body div.tag-tree div.node{font-weight:bold}body div.tag-tree div.node a.inactive{color:#555555}body .tree.flipped{-webkit-transform:rotate(180deg);-moz-transform:rotate(180deg);-ms-transform:rotate(180deg);-o-transform:rotate(180deg);transform:rotate(180deg)}body .tree{overflow:auto}body .tree ul.root{padding-top:0px;margin-top:0px}body .tree ul{position:relative;padding:1em 0px 0px 0px;white-space:nowrap;margin:0px auto 0px auto;text-align:center}body .tree ul::after{content:"";display:table;clear:both}body .tree ul:last-child{padding-bottom:0.1em}body .tree li{display:inline-block;vertical-align:top;text-align:center;list-style-type:none;position:relative;padding:1em 0.5em 0em 0.5em}body .tree li::before{content:"";position:absolute;top:0px;right:50%;border-top:solid 2px #cccccc;width:50%;height:1.19999em}body .tree li::after{content:"";position:absolute;top:0px;right:50%;border-top:solid 2px #cccccc;width:50%;height:1.19999em}body .tree li::after{right:auto;left:50%;border-left:solid 2px #cccccc}body .tree li:only-child{padding-top:0em}body .tree li:only-child::after{display:none}body .tree li:only-child::before{display:none}body .tree li:first-child::before{border-style:none;border-width:0px}body .tree li:first-child::after{border-radius:5px 0px 0px 0px}body .tree li:last-child::after{border-style:none;border-width:0px}body .tree li:last-child::before{border-right:solid 2px #cccccc;border-radius:0px 5px 0px 0px}body .tree ul ul::before{content:"";position:absolute;top:0px;left:50%;border-left:solid 2px #cccccc;width:0px;height:1.19999em}body .tree li div.forest-link{border:solid 2px #cccccc;padding:0.2em 0.29999em 0.2em 0.29999em;text-decoration:none;display:inline-block;border-radius:5px 5px 5px 5px;color:#333333;position:relative;top:2px}body .tree.flipped li div.forest-link{-webkit-transform:rotate(180deg);-moz-transform:rotate(180deg);-ms-transform:rotate(180deg);-o-transform:rotate(180deg);transform:rotate(180deg)}</style><script async="" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.23.0/themes/prism.min.css" rel="stylesheet" /><script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.23.0/components/prism-core.min.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.23.0/plugins/autoloader/prism-autoloader.min.js"></script><!--replace-end-7--><!--replace-end-4--><!--replace-end-1--></head><body><div class="ui fluid container universe"><!--replace-start-2--><!--replace-start-3--><!--replace-start-6--><div class="ui text container" id="zettel-container" style="position: relative"><div class="zettel-view"><article class="ui raised attached segment zettel-content"><div class="pandoc"><h1 id="title-h1">What happens when you access google.com in your browser?</h1><p>Reference: <a href="https://github.com/alex/what-happens-when">https://github.com/alex/what-happens-when</a></p><p>Checkout <span class="zettel-link-container cf"><span class="zettel-link" title="2021-09-28T21:48"><a href="6a12fff9.html">internet protocol suite</a></span></span></p><h2 id="check-hsts-list">Check HSTS list</h2><ol><li>It does a check against HSTS</li><li>If website is in the list, the browser sends its request via HTTPS instead of HTTP.</li><li>Initial request is sent via HTTP.<ul><li>If website wants to be secure, it can still use HSTS policy, it will send user a response indicating as such.</li></ul></li></ol><h2 id="dns-lookup">DNS lookup</h2><ol><li><p>Look into browser cache</p><ul><li>firefox - <code>about:networking#dns</code></li></ul></li><li><p>If cannot find: look into hosts file to resolve hostname.</p></li><li><p>Make request to DNS server configured in your network</p><ul><li><p>Usually your local router / ISP’s caching DNS server</p><pre><code class="language-none">&gt; $ cat /etc/resolv.conf
# Generated by resolvconf
nameserver 10.0.0.1
options edns0</code></pre></li><li><p>If DNS server is on the **same <span class="zettel-link-container cf"><span class="zettel-link" title="2021-09-30T21:30"><a href="c37ff1a7.html">subnet</a></span></span> **, network library follows the ARP process for the dns server</p></li><li><p>If DNS server is on the <strong>different <span class="zettel-link-container cf"><span class="zettel-link" title="2021-09-30T21:30"><a href="c37ff1a7.html">subnet</a></span></span></strong>, it follows the ARP process for the default gateway IP.</p></li></ul></li></ol><h2 id="arp-process">ARP Process</h2><p>This is used to find the MAC address of the DNS server in the network.</p><p>Prerequisites: <a href="https://en.wikipedia.org/wiki/MAC_address">https://en.wikipedia.org/wiki/MAC_address</a></p><ol><li>Check the <span class="zettel-link-container cf"><span class="zettel-link" title="2021-10-04T00:32"><a href="c2185b1e.html">arp table</a></span></span> first, see <span class="zettel-link-container cf"><span class="zettel-link" title="2021-10-04T00:21"><a href="09038a7a.html">check linux arp table</a></span></span> If it exists, return MAC address.</li><li>Use <code>ip route</code> / <code>route</code> to get <span class="zettel-link-container cf"><span class="zettel-link" title="2021-10-04T00:34"><a href="78b47ce3.html">routing tables</a></span></span> If it exists on any subnet in the routing table (use netmask + dest to determine). Use the interface which gives access to the correct subnet with the dns table. Otherwise, use the default gateway (indicated by 0.0.0.0)</li><li>Look up the mac address of the selected network interface e.g. <code>ifconfig wlo1</code>: ether 04:ea:56:86:c6:8f</li><li>Send link layer broadcast:<pre><code class="language-none">Sender MAC: &lt;selected interface mac addr&gt;
Sender IP: &lt;selected interface ip&gt;
Target MAC: FF:FF:FF:FF:FF:FF (broadcast)
Target IP: &lt;target ip - see resolv.conf&gt;</code></pre></li><li>If your computer is connected to the router, router responds with <code>ARP Reply</code>.</li><li>If your computer is connected to Hub, hub broadcasts ARP request to all ports, if router is connected on same wire, it responds with ARP reply.</li><li>If computer is connected to switch, switch check CAM/MAC table to see which port has MAC address we are looking for. If switch has no entry, it broadcasts to all tables. If your on same wire it sends ARP reply.</li></ol><p>ARP reply:</p><pre><code class="language-none">Sender MAC: target:mac:address:here
Sender IP: target.ip.goes.here
Target MAC: interface:mac:address:here
Target IP: interface.ip.goes.here</code></pre><p>Now the network library has target MAC as well, so it can resume DNS process:</p><ul><li>DNS client establishes a socket to <span class="zettel-link-container cf"><span class="zettel-link" title="2021-01-28T22:43"><a href="69b8c9cf.html">UDP</a></span></span> port 53 on DNS server, using src port &gt; 1023.</li><li>If response size too large, <span class="zettel-link-container cf"><span class="zettel-link" title="2021-01-14T17:47"><a href="6412886d.html">TCP/IP</a></span></span> will be used. TCP can be chunked?</li><li>If local/ISP server does not have the request, recursive search is requested by client. The local DNS server iteratively checks DNS server until SOA reached or until answer is returned.</li></ul><p>Q: <span class="zettel-link-container cf"><span class="zettel-link" title="2021-10-04T21:07"><a href="f9e5dc58.html">Why recursive or iterative DNS?</a></span></span></p><h2 id="sending-to-ip">Sending to IP</h2><p>Q: How is destination port determined? A: defaults to 80 for http, 443 for https</p><ul><li>How does the router route the packet to AS, border routers etc…?</li><li>Notes on Time to Live</li></ul></div><div class="metadata"><div class="date" title="Zettel date"><time datetime="2021-09-27T20:31">2021-09-27</time></div></div></article><nav class="ui attached segment deemphasized backlinksPane" id="neuron-backlinks-pane"><h3 class="ui header">Backlinks</h3><ul class="backlinks"><li><span class="zettel-link-container cf"><span class="zettel-link" title="2021-09-30T20:59"><a href="66a60a0f.html">Network Log</a></span></span><ul class="context-list" style="zoom: 85%;"><li class="item"><div class="pandoc"><p><span class="zettel-link-container cf"><span class="zettel-link" title="2021-09-27T20:31"><a href="b753eb1d.html">What happens when you access google.com in your browser?</a></span></span></p></div></li></ul></li></ul></nav><nav class="ui attached segment deemphasized bottomPane" id="neuron-tags-pane"><div><span class="ui basic label zettel-tag" title="Tag">networks</span></div></nav><nav class="ui bottom attached icon compact inverted menu brown" id="neuron-nav-bar"><!--replace-start-9--><a class="item" href="." title="Home"><i class="home icon"></i></a><!--replace-end-9--><a class="item" href="https://github.com/kwannoel/mind/edit/master/./b753eb1d.md" title="Edit this page"><i class="edit icon"></i></a><a class="right item" href="impulse.html" title="Open Impulse"><i class="wave square icon"></i></a></nav></div></div><!--replace-end-6--><!--replace-end-3--><!--replace-end-2--><div class="ui center aligned container footer-version"><div class="ui tiny image"><a href="https://neuron.zettel.page"><img alt="logo" src="https://raw.githubusercontent.com/srid/neuron/master/assets/neuron.svg" title="Generated by Neuron 1.9.35.3" /></a></div></div></div></body></html>